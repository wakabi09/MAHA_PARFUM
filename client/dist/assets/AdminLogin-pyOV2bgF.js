import{r as l,l as j,j as e}from"./index-DMg7K7Es.js";import{a as y}from"./index-xsH4HHeE.js";const k=()=>{const[n,p]=l.useState(""),[d,x]=l.useState(""),[i,o]=l.useState(""),[a,c]=l.useState(!1),h=j(),f=async s=>{var m,u,b,g;s.preventDefault(),o(""),c(!0);try{const t=await y.post("http://localhost:5000/api/auth/login",{email:n,password:d}),{role:r,token:w}=t.data;r==="owner"?(localStorage.setItem("adminToken",w),localStorage.setItem("adminRole",r),h("/admin/dashboard")):o("Akses ditolak: Anda bukan admin/owner.")}catch(t){const r=((u=(m=t.response)==null?void 0:m.data)==null?void 0:u.message)||((g=(b=t.response)==null?void 0:b.data)==null?void 0:g.error)||"Terjadi kesalahan saat login.";o("Login gagal: "+r)}finally{c(!1)}};return e.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-100",children:e.jsxs("form",{onSubmit:f,className:"bg-white p-8 rounded shadow-md w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Admin Login"}),i&&e.jsx("p",{className:"text-red-500 mb-4",children:i}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1",children:"Email"}),e.jsx("input",{type:"email",value:n,onChange:s=>p(s.target.value),className:"w-full border border-gray-300 rounded px-3 py-2",required:!0,disabled:a})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block mb-1",children:"Password"}),e.jsx("input",{type:"password",value:d,onChange:s=>x(s.target.value),className:"w-full border border-gray-300 rounded px-3 py-2",required:!0,disabled:a})]}),e.jsx("button",{type:"submit",disabled:a,className:`w-full py-2 rounded text-white ${a?"bg-blue-300 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"} transition`,children:a?"Loading...":"Login"})]})})};export{k as default};
