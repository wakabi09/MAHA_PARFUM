import{r as l,b as y,j as e,d as R,c as g,A as $,e as D,F as b,f as E,g as H,h as I,u as P,C as x,L as N,R as O,a as k,B as w}from"./index-DMg7K7Es.js";import{a as T}from"./index-xsH4HHeE.js";import{S as z}from"./Spinner-BHu6kg5n.js";import{I as W}from"./Image-D26_5H5u.js";const A=R("h4");A.displayName="DivStyledAsH4";const v=l.forwardRef(({className:a,bsPrefix:t,as:s=A,...r},n)=>(t=y(t,"alert-heading"),e.jsx(s,{ref:n,className:g(a,t),...r})));v.displayName="AlertHeading";const S=l.forwardRef(({className:a,bsPrefix:t,as:s=$,...r},n)=>(t=y(t,"alert-link"),e.jsx(s,{ref:n,className:g(a,t),...r})));S.displayName="AlertLink";const L=l.forwardRef((a,t)=>{const{bsPrefix:s,show:r=!0,closeLabel:n="Close alert",closeVariant:f,className:d,children:m,variant:u="primary",onClose:h,dismissible:c,transition:i=b,...o}=D(a,{show:"onClose"}),p=y(s,"alert"),B=E(F=>{h&&h(!1,F)}),j=i===!0?b:i,C=e.jsxs("div",{role:"alert",...j?void 0:o,ref:t,className:g(d,p,u&&`${p}-${u}`,c&&`${p}-dismissible`),children:[c&&e.jsx(H,{onClick:B,"aria-label":n,variant:f}),m]});return j?e.jsx(j,{unmountOnExit:!0,...o,ref:void 0,in:r,children:C}):r?C:null});L.displayName="Alert";const U=Object.assign(L,{Link:S,Heading:v}),K=()=>{var c;const{id:a}=I(),{addToCart:t}=P(),[s,r]=l.useState(null),[n,f]=l.useState(!0),[d,m]=l.useState("");l.useEffect(()=>{(async()=>{try{const o=await T.get(`http://localhost:5000/api/products/${a}`);r(o.data),m("")}catch(o){console.error("Failed to fetch product:",o),m("Failed to load product. Please try again.")}finally{f(!1)}})()},[a]);const u=i=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(i),h=()=>{s&&(t(s),alert(`${s.name} added to cart!`))};return n?e.jsxs(x,{className:"text-center py-5",children:[e.jsx(z,{animation:"border"}),e.jsx("p",{children:"Loading..."})]}):d?e.jsxs(x,{className:"text-center py-5",children:[e.jsx(U,{variant:"danger",children:d}),e.jsx(N,{to:"/collection",children:"← Back to Collection"})]}):s?e.jsx(x,{className:"py-5",children:e.jsxs(O,{className:"align-items-center",children:[e.jsx(k,{md:6,children:e.jsx(W,{src:(c=s.image)!=null&&c.startsWith("http")?s.image:`http://localhost:5000/assets/${s.image}`,alt:s.name,fluid:!0,rounded:!0,style:{maxHeight:"500px",objectFit:"cover",width:"100%"}})}),e.jsxs(k,{md:6,children:[e.jsx(N,{to:"/collection",className:"text-decoration-none text-muted d-block mb-3",children:"← Back to Collection"}),e.jsx("h1",{className:"display-5 fw-bold",children:s.name}),e.jsx("p",{className:"fs-5 text-muted",children:s.brand}),e.jsx("p",{className:"display-6 fw-semibold my-3",children:u(s.price)}),e.jsx("p",{className:"lead",children:s.description}),e.jsxs("div",{className:"my-4",children:[e.jsx("h5",{className:"fw-semibold",children:"Scent Notes:"}),e.jsx("p",{children:s.notes||"-"})]}),s.countInStock>0?e.jsx(w,{variant:"dark",size:"lg",className:"w-100",onClick:h,children:"Add to Cart"}):e.jsx(w,{variant:"secondary",size:"lg",className:"w-100",disabled:!0,children:"Out of Stock"})]})]})}):e.jsxs(x,{className:"text-center py-5",children:[e.jsx("h1",{className:"fw-bold",children:"Product not found"}),e.jsx(N,{to:"/collection",children:"← Back to Collection"})]})};export{K as default};
